# Story 5.1: Core Project and Transport Status

**Epic:** [Epic 5: Enhance MCP `status` Command](../epic-5.md)

**User Stories:**

*   As an AI agent, I want to retrieve the current project name and audio engine status, so I can confirm I'm working in the correct project and that audio is active.
*   As an AI agent, I want to know the current transport state (playing, recording, tempo, time signature, beat/time position), so I can synchronize my actions with Bitwig's playback.

**Acceptance Criteria:**

*   The `status` MCP command response includes:
    *   `wigai_version` (string)
    *   `project_name` (string)
    *   `audio_engine_active` (boolean)
    *   A `transport` object containing:
        *   `playing` (boolean)
        *   `recording` (boolean)
        *   `repeat_active` (boolean)
        *   `metronome_active` (boolean)
        *   `current_tempo` (float)
        *   `time_signature` (string, e.g., "4/4")
        *   `current_beat_str` (string, e.g., "1.1.1:0")
        *   `current_time_str` (string, e.g., "0.0.0:0")
*   The `StatusTool.java` correctly queries the Bitwig API for project name, audio engine status, and all specified transport details.
*   The `api-reference.md` is updated to reflect these fields in the `status` command's response.
*   The tool gracefully handles scenarios where project information might be initializing or briefly unavailable (though core fields are expected to be present).

**Tasks:**

1.  Modify `StatusTool.java` to fetch `project_name` and `audio_engine_active`.
2.  Modify `StatusTool.java` to fetch all transport-related fields: `playing`, `recording`, `repeat_active`, `metronome_active`, `current_tempo`, `time_signature`, `current_beat_str`, `current_time_str`.
3.  Update the JSON construction in `StatusTool.java` to include these new root-level and `transport` object fields.
4.  Update `docs/api-reference.md` with the new response fields for this story.
5.  Write unit tests for the new data retrieval logic in `StatusTool.java`.
6.  Perform manual testing against Bitwig Studio to verify accuracy of all fields.
